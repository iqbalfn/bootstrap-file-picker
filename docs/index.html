<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/themes/prism.min.css">
    <link rel="stylesheet" href="css/bootstrap-file-picker.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://iqbalfn.github.io/bootstrap-drawer/css/bootstrap-drawer.css">

    <title>Bootstrap File Picker</title>

    <style>
        h1{ margin-top: 80px; }
        h2,h3{ margin-top: 40px; }
        .example{ border: 4px solid #eee; margin-bottom:30px;}
        .example-preview{ padding: 1.5rem; }
        .example > pre{ border-top: 4px solid #eee;margin:0; }
        .no-html{ display: none; }
        .highlihgt-grid .row + .row{ margin-top: 1rem;}
        .highlihgt-grid [class^="col-"]{
            padding-top: .75rem;
            padding-bottom: .75rem;
            background-color: rgba(86,61,124,.15);
            border: 1px solid rgba(86,61,124,.2);
        }
    </style>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-1746437125043617",
              enable_page_level_ads: true
         });
    </script>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
        <a class="navbar-brand" href="#">Bootstrap File Picker</a>
        <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbarSupportedContent" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/iqbalfn/bootstrap-file-picker">Github</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/iqbalfn/bootstrap-file-picker/archive/master.zip">Download</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <h1>File Picker</h1>
                <p class="lead">Use Bootstrap's JavaScript file picker plugin to pick file from server or from user local dir.</p>

                <p>The plugin is using <a href="https://iqbalfn.github.io/bootstrap-drawer/">Bootstrap File Picker</a> plugin for the container, and you should include the plugin manually.</p>

                <p>You have to provide function to find files from server, you may use jQuery ajax function. You also need to provide function to upload file to server, you may use <a href="https://github.com/iqbalfn/filuploader">FileUploader</a>. This plugin don't provide function for this both action.</p>

                <section>
                    <h2>Examples</h2>
                    <article>
                        <section>
                            <h3>File Picker Components</h3>

                            <article>
                                <p>Below is example of file picker that allow you to select file from server, and upload file to server with custom function. The upload action is mocked.</p>
                                <div class="example">
                                    <div class="example-preview source-code" data-hl="html">
                                        <div class="input-group mb-3">
                                            <input type="text" class="form-control" placeholder="The File" aria-label="The File" aria-describedby="btn-picker" id="inp-picker">
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-secondary" type="button" id="btn-picker">Pick</button>
                                            </div>
                                        </div>

                                        <script>
                                            document.addEventListener('DOMContentLoaded', function(){
                                                $('#btn-picker').click(function(){

                                                    /* here we activate the file picker */
                                                    new FilePicker({

                                                        /* select only one file */
                                                        multiple    : false,
                                                        
                                                        /* accepted mime type, the value is forwarded to
                                                           `accept` attribute of the input file. */
                                                        type        : 'image/*',

                                                        /* fallback thumbnails image to use if the result don't
                                                           have one */
                                                        thumbnails  : 'img/file-thumb.png',

                                                        /* a html to use on [Pick File] button
                                                           try provide fa icon with <i class="fa fa-*"></i> */
                                                        btnUpload   : '<i class="fa fa-upload" aria-hidden="true"></i>',

                                                        /* a function to find list of files from server
                                                           - query string
                                                             user provided search query
                                                           - type string
                                                             as of options.type
                                                           - callback function
                                                             a callback to call on result received from
                                                             server. this endpoint expect the first
                                                             parameter is array of files with properties:
                                                             - name Filename
                                                             - path Path to the file ( use as final value )
                                                             - type file mime type
                                                             - thumb Image url for file thumbnail. */
                                                        search      : function(query, type, callback){
                                                            // let build the result
                                                            let result = []
                                                            let min    = Math.floor(Math.random() * 5) + 1
                                                            let max    = Math.floor(Math.random() * 9) + min
                                                            if(max > 9)
                                                                max = 9

                                                            for(let i=min; i<=max; i++){
                                                                result.push({
                                                                    name : 'File Name That is Too Long For Simpe ' + i,
                                                                    path : 'http://m1m2dm1nu1s3rv3rd3m0.co.nf/media/?id=' + i,
                                                                    type : 'image/png',
                                                                    // thumb: 'http://m1m2dm1nu1s3rv3rd3m0.co.nf/media/?id=' + i
                                                                })
                                                            }

                                                            // simulate ajax delay
                                                            setTimeout(callback, 1000, result)
                                                        },

                                                        /* a function to call for file upload
                                                           - file File object to upload
                                                           - progress The progress element
                                                           - callback final progress. this function expect
                                                             file object in search.callback structure. */
                                                        upload      : function(file, progress, callback){
                                                            let percent = 0
                                                            let index   = Math.floor(Math.random() * 9) + 1
                                                            let xfile   = 'http://m1m2dm1nu1s3rv3rd3m0.co.nf/media/?id=' + index

                                                            // simulate file upload progress
                                                            let uploader = () => {
                                                                percent+= Math.floor(Math.random() * 9) + 1
                                                                if(percent > 100){
                                                                    percent = 100
                                                                    callback({
                                                                        name : file.name,
                                                                        path : xfile,
                                                                        type : file.type,
                                                                        thumb: xfile
                                                                    })
                                                                }else{
                                                                    let nextTime = ( Math.floor(Math.random() * 9) + 1 ) * 100
                                                                    setTimeout(() => uploader(), nextTime)
                                                                }
                                                                progress.style.width = percent + '%'
                                                            }

                                                            uploader()
                                                        },

                                                        /* a function to call when user already pick file(s)
                                                           - files Array list of file object in search.callback format */
                                                       selected     : function(files){
                                                            files.forEach(file => $('#inp-picker').val(file.path))
                                                       }
                                                    })

                                                });
                                            }, false);
                                        </script>
                                    </div>
                                </div>
                            </article>
                        </section>

                    </article>
                </section>

                <div>TODO: More docs</div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/prism.min.js" data-manual></script>
    <script src="js/source.js"></script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://iqbalfn.github.io/bootstrap-drawer/js/bootstrap-drawer.js"></script>
    <script src="js/bootstrap-file-picker.js"></script>
</body>
</html>